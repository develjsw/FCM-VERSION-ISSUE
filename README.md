### FCM Legacy API Deprecated

---
- 기존 FCM ( Firebase Cloud Messaging ) API 지원종료 / 중단과 관련된 이슈 해결과정 기록
---

- 이슈 내용
  - 통화 분석 요청 후 APP에서 `통화 분석 결과`를 확인하려고 할 때, 상태가 '`분석중`'에서 `멈춰 있는 이슈` 발생
  - 통화 분석은 외부 업체의 STT ( Speech-to-Text ) API를 활용해 진행됨
    - STT란? 음성을 분석해 텍스트 데이터로 변환하는 기술로, 통화 중 대화 내용을 텍스트 형태로 저장하거나 활용할 수 있도록 지원하는 기능


- 가설 및 검증 과정
  - DB 값 확인
    - 통화 분석 결과와 상태값이 `정상적으로` '`분석완료`'로 `저장`되어 있는 것을 확인
    - 저장된 값에 이상이 없으며, 로그에도 별도의 `에러가 기록되어 있지 않음`을 확인
  - APP Push와 관련된 가설 수립
    - APP의 통화 분석 결과 확인 화면은 Native APP으로 구현되어 있으며, APP Push 발송 후 전달받은 data 값을 활용하여 새로 데이터를 받아와 표시하는 구조
    - 이 점을 기반으로, APP Push 발송에 문제가 있을 가능성을 가설로 설정하고 Push 발송 소스코드를 확인함
  - APP Push 발송 소스코드 검증
    - Push 발송 부분은 별도의 try ~ catch로 처리되어 있었으며, statusCode가 200이면 정상 처리로 간주하는 로직 확인
    - 그러나 내부 응답값에서 success: 0, failure: 1, results: { error: 'DeprecatedApi' } 상태를 발견
  - 문제 원인 파악
    - FCM API 관련 공식문서 확인 결과
      - `2023년 6월 20일` `지원 중단`
      - `2024년 7월 22일` `서비스 종료 시작`
    - 따라서, `HTTP v1 버전`으로 `마이그레이션이 필요`하다는 결론에 도달함


- 해결 과정
  - 내용 작성중


- 재발 방지대책 + 확장성 고려
  - 내용 작성 예정
